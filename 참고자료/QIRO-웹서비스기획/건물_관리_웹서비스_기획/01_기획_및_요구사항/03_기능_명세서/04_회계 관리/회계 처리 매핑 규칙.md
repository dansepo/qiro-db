# **회계 처리 매핑 규칙(Mapping Rule) ENUM 상세 가이드 (확장판)**

### **1. 문서 개요**

본 문서는 건물관리 시스템의 **`standard_billing_items`** 테이블에 정의된 **`default_mapping_rule`**의 모든 ENUM(열거형) 값을 정의하고, 각 규칙이 어떤 회계 처리 로직을 실행시키기 위한 '명령어'인지 상세히 설명합니다. 이 가이드는 개발자가 각 청구 항목의 성격에 맞는 자동 회계 처리 로직을 구현하기 위한 기술 명세입니다.

### **2. `mapping_rule` ENUM 목록 및 상세 설명**

#### **그룹 1: 기본 규칙 (Basic Rules)**

| ENUM 값 (Mapping Rule)       | 의미                        | 회계적 성격                            | 시스템 처리 예시                                             |
| ---------------------------- | --------------------------- | -------------------------------------- | ------------------------------------------------------------ |
| **`DIRECT_EXPENSE_BILLING`** | **비용 직접 청구**          | **비용 (Expense)**                     | **상황:** '청소비' 100만원을 10개 호실에 10만원씩 부과. **시스템 동작:** 1. **(비용 인식)** 회계 장부에 `청소비(비용)` 100만원을 기록합니다. 2. **(매출 인식)** 각 호실에 부과된 10만원씩을 `관리비수익(수익)`으로 인식합니다. 3. 최종적으로 비용과 수익이 상계되어, 건물 운영의 손익을 정확하게 계산합니다. |
| **`REVENUE_WITH_OFFSET`**    | **비용 차감을 동반한 수익** | **비용(Expense) & 수익(Revenue) 복합** | **상황:** 한전에서 전기료 1,000만원이 청구되었고, 이 중 800만원은 각 세대 사용분, 200만원은 공용 사용분입니다. **시스템 동작:** 1. **(비용 선인식)** 먼저 `공용전기료(비용)`로 1,000만원을 기록합니다. 2. **(수익 발생)** 각 세대에 부과된 800만원을 `전기료수익(수익)`으로 기록합니다. 3. **(비용 조정)** 시스템은 `전기료수익` 800만원만큼 `공용전기료(비용)`를 자동으로 차감합니다. 4. 최종적으로 장부에는 **순수한 `공용전기료(비용)` 200만원**만 남게 됩니다. |
| **`DIRECT_REVENUE_BILLING`** | **수익 직접 청구**          | **수익 (Revenue)**                     | **상황:** '헬스장 이용료' 3만원을 101호에 부과. **시스템 동작:** 1. 별도의 비용 처리 없이, 부과된 3만원을 즉시 `시설이용료수익(수익)`으로 기록합니다. |
| **`DEPOSIT_HANDLING`**       | **보증금 처리**             | **부채 (Liability)**                   | **상황:** 101호에 '이사 엘리베이터 보증금' 20만원을 부과. **시스템 동작:** 1. 이 20만원은 수익이 아니므로, 나중에 돌려줘야 할 돈인 **`보증금예수금(부채)`** 계정에 기록합니다. 2. 이사 완료 후 문제가 없어 환불할 때, 이 부채 계정에서 해당 금액을 차감하고 현금/예금 자산을 감소시키는 반대 회계 처리를 수행합니다. |
| **`RESERVE_HANDLING`**       | **충당금 적립**             | **부채 (Liability)**                   | **상황:** '장기수선충당금' 1만원을 101호에 부과. **시스템 동작:** 1. 이 1만원은 미래의 대규모 수선을 위해 미리 적립하는 돈이므로, **`장기수선충당금(부채)`** 계정에 기록합니다. 2. 나중에 실제로 대규모 수선 공사를 진행하고 비용을 지출할 때, 이 부채 계정에서 해당 금액을 차감하여 사용합니다. |

#### **그룹 2: 조정 및 특수 규칙 (Adjustment & Special Rules)**

| ENUM 값 (Mapping Rule)    | 의미                     | 회계적 성격                              | 시스템 처리 예시                                             |
| ------------------------- | ------------------------ | ---------------------------------------- | ------------------------------------------------------------ |
| **`REVENUE_WITH_VAT`**    | **부가가치세 포함 수익** | **수익(Revenue) & 부채(Liability) 복합** | **상황:** 상가 임대료 110만원(공급가액 100만원 + 부가세 10만원)을 부과. **시스템 동작:** 1. 공급가액 100만원은 `임대료수익(수익)`으로 기록합니다. 2. 부가세 10만원은 납부해야 할 세금이므로 `부가세예수금(부채)`으로 기록합니다. |
| **`DISCOUNT_OR_WAIVER`**  | **할인 및 감면**         | **수익 감소 또는 비용 발생**             | **상황:** 헬스장 이용료 5만원에 대해, 장기계약 할인 1만원을 적용. **시스템 동작:** 1. `시설이용료수익(수익)`을 5만원 발생시킵니다. 2. `매출할인(수익 차감)` 또는 `판매촉진비(비용)` 계정에 1만원을 기록하여 수익을 조정합니다. 3. 최종적으로 청구되는 금액은 4만원이 됩니다. |
| **`PREPAYMENT_HANDLING`** | **선수금 처리**          | **부채(Liability) → 수익(Revenue) 전환** | **상황:** 1년치 시설 이용료 120만원을 선납 받음. **시스템 동작:** 1. 최초 수납 시, 120만원 전체를 `선수수익(부채)`으로 기록합니다. 2. 매월 결산 시, 10만원씩 `선수수익(부채)`에서 차감하고 `시설이용료수익(수익)`으로 대체하는 회계 처리를 자동으로 수행합니다. |
| **`BAD_DEBT_WRITEOFF`**   | **대손 처리**            | **비용(Expense) & 자산(Asset) 감소**     | **상황:** 퇴실한 임차인이 미납한 관리비 50만원을 회수 불가능하다고 판단. **시스템 동작:** 1. 회수할 권리인 `미수관리비(자산)` 50만원을 감소시킵니다. 2. 동시에, `대손상각비(비용)` 50만원을 발생시켜 회계상 손실로 처리합니다. |



---



# **분개(Journalizing) 처리 방식 가이드**

### **1. 문서 개요**

본 문서는 건물관리 시스템이 관리비를 부과할 때, **`mapping_rule`**에 따라 어떻게 **자동으로 분개(Journalizing)를 생성**하는지에 대한 처리 방식을 정의합니다. 분개는 모든 회계 거래를 차변(Debit)과 대변(Credit)으로 나누어 기록하는 절차이며, 자동화된 재무제표 생성의 가장 기초가 됩니다.

### **2. 분개의 기본 원칙 (대차 평균의 원리)**

모든 거래는 원인과 결과로 나뉘며, 차변(자산의 증가, 비용의 발생)과 대변(부채/자본의 증가, 수익의 발생)의 합계 금액은 항상 일치해야 합니다.

- **차변(Debit) 요소:** 자산의 증가, 부채의 감소, 자본의 감소, **비용의 발생**
- **대변(Credit) 요소:** 자산의 감소, **부채의 증가**, **자본의 증가**, **수익의 발생**

관리비를 부과하는 행위는 관리 주체 입장에서 **'미수관리비'라는 자산(받을 돈)을 증가**시키므로, 모든 분개의 **차변은 대부분 `미수관리비`**가 됩니다. `mapping_rule`은 이와 짝을 이루는 대변 계정을 결정하는 역할을 합니다.

### **3. `mapping_rule`별 자동 분개 처리 예시**

아래는 각 `mapping_rule`에 따라 시스템이 생성해야 할 자동 분개 예시입니다.

| ENUM 값 (Mapping Rule)       | 의미                        | 분개 처리 예시 (101호에 10만원 부과 시)                      |
| ---------------------------- | --------------------------- | ------------------------------------------------------------ |
| **`DIRECT_EXPENSE_BILLING`** | **비용 직접 청구**          | **상황:** '청소비' 10만원을 부과 **분개:** 차변) 미수관리비 (자산)   100,000 대변) 관리비수익-청소비 (수익)   100,000 *(시스템 내부적으로는, 실제 청소 용역비 지출 시 발생한 '청소비(비용)' 계정과 이 '관리비수익' 계정이 상계되어 손익이 계산됩니다.)* |
| **`DIRECT_REVENUE_BILLING`** | **수익 직접 청구**          | **상황:** '헬스장 이용료' 10만원을 부과 **분개:** 차변) 미수관리비 (자산)   100,000 대변) 시설이용료수익 (수익)   100,000 *(이 경우는 별도의 비용 차감 없이, 부과 금액이 바로 관리 외 수익이 됩니다.)* |
| **`REVENUE_WITH_OFFSET`**    | **비용 차감을 동반한 수익** | **상황:** '세대 전기료' 10만원을 부과 **분개:** 차변) 미수관리비 (자산)   100,000 대변) 전기료수익 (수익)   100,000 *(**중요:** 이 분개와 동시에, 시스템은 사전에 비용으로 인식했던 '공용전기료(비용)' 계정에서 10만원을 자동으로 차감하여, 실제 공용부담 비용만 남도록 조정합니다.)* |
| **`DEPOSIT_HANDLING`**       | **보증금 처리**             | **상황:** '이사 보증금' 10만원을 부과 **분개:** 차변) 미수관리비 (자산)   100,000 대변) 보증금예수금 (**부채**)   100,000 *(보증금은 수익이 아니므로, 나중에 돌려줘야 할 돈인 '부채'로 기록됩니다.)* |
| **`RESERVE_HANDLING`**       | **충당금 적립**             | **상황:** '장기수선충당금' 10만원을 부과 **분개:** 차변) 미수관리비 (자산)   100,000 대변) 장기수선충당금 (**부채**)   100,000 *(미래의 수선을 위해 쌓아두는 돈이므로, '부채'로 기록됩니다.)* |
| **`REVENUE_WITH_VAT`**       | **부가가치세 포함 수익**    | **상황:** 임대료 11만원(공급가액 10만원+부가세 1만원) 부과 **분개:** 차변) 미수관리비 (자산)   110,000 대변) 임대료수익 (수익)   100,000 대변) 부가세예수금 (**부채**)   10,000 *(부가세는 국가에 납부해야 할 돈이므로, '부채'로 기록됩니다.)* |

### **4. 결론**

이처럼 각 청구 항목에 올바른 `mapping_rule`을 설정해두는 것만으로, 시스템은 복잡한 모든 관리비 거래를 정확한 회계 원칙에 따라 자동으로 분개할 수 있습니다. 이렇게 생성된 분개 데이터는 최종적으로 **운영성과보고서(손익계산서), 재무상태표** 등 핵심적인 재무제표를 만드는 기초 자료가 됩니다.