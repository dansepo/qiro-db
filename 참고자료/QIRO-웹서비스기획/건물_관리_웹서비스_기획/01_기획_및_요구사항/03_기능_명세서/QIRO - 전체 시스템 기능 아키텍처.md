# 🗺️ QIRO - 전체 시스템 기능 아키텍처 (v1.3)

## 1. 문서 정보

- **문서명:** QIRO - 전체 시스템 기능 아키텍처
- **작성일:** 2025년 07월 24일
- **최종 수정일:** 2025년 07월 24일
- **문서 버전:** 1.3 (주요 API 엔드포인트 연계)

## 2. 개요

본 문서는 QIRO 건물 관리 SaaS의 모든 핵심 기능을 논리적 그룹으로 분류하고, 각 기능의 목적과 이를 구현하기 위한 주요 API 엔드포인트를 정의하는 최상위 아키텍처 문서입니다.

## 3. 기능 아키텍처 분류

### Ⅰ. 기초 정보 및 정책 관리 (Foundation & Policy)

> 시스템 운영에 필요한 모든 기준 정보와 정책을 설정하는 영역입니다.

| 기능 ID                | 기능 명                   | 설명                                                         | 주요 API Endpoint(s)                                         |
| ---------------------- | ------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **F-BLDGMGMT-001**     | **건물 정보 상세 관리**   | 건물, 동, 호실의 물리적/행정적 마스터 정보를 등록하고 관리합니다. | `POST /buildings`, `GET /buildings/{id}`, `GET /buildings/{id}/units` |
| **F-PEOPLEMGMT-001**   | **임대인 및 임차인 관리** | 계약의 주체인 임대인(소유주)과 임차인의 마스터 정보를 등록하고 관리합니다. | `POST /lessors`, `GET /lessors`, `POST /tenants`, `GET /tenants` |
| **F-FEE-SETUP-001**    | **관리비 항목 관리**      | 정기 관리비 항목의 이름, 유형, 과세 여부, 부과 규칙 등을 정의합니다. | `POST /fee-items`, `GET /fee-items`                          |
| **F-EXTBILL-MGMT-001** | **외부 고지서 관리**      | 한전, 수도 등 외부 기관의 고객번호 및 청구 용도를 마스터로 등록합니다. | `POST /external-bill-accounts`, `GET /external-bill-accounts` |
| **F-PAYINFO-001**      | **납부 정보 설정**        | 관리비 수납 계좌, 납부 마감일, 연체료율 등 핵심 납부 정책을 설정합니다. | `GET /payment-settings/policies`, `PUT /payment-settings/policies` |

### Ⅱ. 월별 관리비 처리 워크플로우 (Monthly Billing Workflow)

> 매월 반복되는 관리비 정산 업무의 전체 과정을 단계별로 수행하는 핵심 업무 영역입니다.

| 단계  | 기능 ID               | 기능 명                        | 설명                                                         | 주요 API Endpoint(s)                                         |
| ----- | --------------------- | ------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **1** | **F-BILL-CREATE-001** | **청구월 생성 및 초기값 설정** | 해당 월의 관리비 업무를 시작하기 위한 작업 공간을 생성하고, 이전 달 데이터를 안전하게 이월합니다. | `POST /billing-months`                                       |
| **2** | **F-DATAINPUT-001**   | **월별 데이터 입력**           | 생성된 청구월에 대해 검침값, 외부 고지서 총액 등 모든 변동 데이터를 입력합니다. | `POST /unit-meter-readings/batch`, `PUT /billing-months/{id}/external-bill-amounts` |
| **3** | **F-FEE-CALC-001**    | **관리비 자동 산정**           | 입력된 모든 데이터를 바탕으로 각 호실의 최종 관리비를 자동으로 계산합니다. | `POST /billing-months/{id}/actions/calculate-fees`           |
| **4** | **F-INV-ISSUE-001**   | **고지서 발급**                | 확정된 산정 결과를 바탕으로 공식 고지서를 생성하고 발급 처리합니다. | `POST /billing-months/{id}/invoices/batch-generate`          |
| **5** | **F-PAY-PROC-001**    | **수납 처리**                  | 입금된 내역을 시스템에 기록하고 미납액을 실시간으로 업데이트합니다. | `POST /invoices/{id}/payments`                               |
| **6** | **F-DELINQMGMT-001**  | **미납 및 연체료 관리**        | 미납 건을 추적하고, 정책에 따라 연체료를 계산하여 다음 달로 이월합니다. | `GET /delinquencies`, `POST /delinquencies/actions/calculate-all-late-fees` |

### Ⅲ. 임대차 관리 워크플로우 (Lease Management Workflow)

> 임대 계약의 생성부터 종료, 정산까지 임대차 생애주기 전반을 관리하는 핵심 업무 영역입니다.

| 기능 ID            | 기능 명                    | 설명                                                         | 주요 API Endpoint(s)                                       |
| ------------------ | -------------------------- | ------------------------------------------------------------ | ---------------------------------------------------------- |
| **F-LCMGMT-001**   | **임대 계약 관리**         | 임대 계약의 생성, 갱신, 해지 등 계약의 전체 생애주기를 관리합니다. | `POST /lease-contracts`, `GET /lease-contracts/{id}`       |
| **F-RENTMGMT-001** | **임대료 관리**            | 계약 조건에 따라 월별 임대료를 청구하고 납부 현황을 추적합니다. | `GET /monthly-rents`, `POST /monthly-rents/{id}/payments`  |
| **F-MVSETTLE-001** | **입주 및 퇴실 정산 관리** | 임차인 입주 및 퇴실 시 미납액, 보증금, 최종 공과금 등을 정산합니다. | `POST /move-out-settlements`                               |
| **F-LSSTAT-001**   | **임대 현황 조회**         | 건물 전체의 임대율, 공실 현황 등 핵심 지표를 한눈에 파악합니다. | `GET /leasing-status/summary`, `GET /leasing-status/units` |

### Ⅳ. 시설 유지보수 관리 워크플로우 (Facility Maintenance Workflow)

> 건물의 물리적 자산을 관리하고, 예방 점검 및 보수 활동을 체계적으로 수행하는 영역입니다.

| 기능 ID                    | 기능 명                     | 설명                                                         | 주요 API Endpoint(s)                                         |
| -------------------------- | --------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **F-FACILITY-OVERALL-001** | **시설 유지보수 통합 관리** | 시설물, 작업 이력, 협력업체, 비용/결제를 유기적으로 연결하여 관리하는 통합 모듈입니다. | `GET /facilities`, `POST /facilities/{id}/inspection-records` |
| **F-VENDMGMT-001**         | **협력업체 관리**           | 시설 유지보수 관련 외부 협력업체의 정보, 계약, 성과 등을 관리합니다. | `POST /facility-vendors`, `GET /facility-vendors`            |

### Ⅴ. 운영 및 고객 관리 (Operations & Customer)

> 일상적인 건물 운영과 입주민과의 소통을 지원하는 기능 영역입니다.

| 기능 ID              | 기능 명                   | 설명                                                         | 주요 API Endpoint(s)                              |
| -------------------- | ------------------------- | ------------------------------------------------------------ | ------------------------------------------------- |
| **F-COMPMGMT-001**   | **민원 처리 관리**        | 입주민 민원을 접수, 배정, 처리하고 전체 이력을 체계적으로 관리합니다. | `POST /complaints`, `GET /complaints/{id}`        |
| **F-NOTICEMGMT-001** | **알림 및 공지사항 관리** | 전체 또는 특정 대상에게 공지사항을 게시하고, 시스템 내 주요 이벤트 발생 시 자동 알림을 설정 및 발송합니다. | `POST /announcements`, `POST /notifications/send` |

### Ⅵ. 시스템 및 데이터 관리 (System & Data)

> 시스템의 전반적인 환경을 설정하고, 축적된 데이터를 활용하며, 사용자의 접근을 제어하는 관리 영역입니다.

| 기능 ID                | 기능 명                      | 설명                                                         | 주요 API Endpoint(s)                                         |
| ---------------------- | ---------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **F-ACCMGMT-001**      | **회계 관리**                | 모든 재무 거래를 전표로 기록하고, 총계정원장 및 재무제표를 생성합니다. | `POST /journal-entries`, `GET /financial-statements/income-statement` |
| **F-RPTMGMT-001**      | **보고서 및 통계 관리**      | 임대, 관리비, 수납, 민원 등 시스템 데이터를 기반으로 다양한 운영 보고서와 통계를 제공합니다. | `GET /reports/available-reports`, `GET /reports/leasing/occupancy-status` |
| **F-USERROLEMGMT-001** | **사용자 계정 및 권한 관리** | 내부 직원의 계정을 생성하고, 역할(Role) 기반으로 시스템 기능 접근 권한을 세밀하게 제어합니다. | `POST /internal-users`, `GET /roles`                         |
| **F-SYSCONFIG-001**    | **시스템 환경설정**          | 회사 정보, 로고, 기본 정책, 외부 서비스 연동 정보 등 시스템 전반의 운영 환경을 설정합니다. | `GET /organization-settings`, `PUT /organization-settings`   |
| **F-ONBOARD-001**      | **초기 데이터 마이그레이션** | 신규 고객사가 기존의 건물, 호실, 계약 정보 등을 엑셀로 일괄 등록할 수 있도록 지원합니다. | `POST /units/batch-upload`                                   |
| **(N/A)**              | **이력 관리 (Audit Trail)**  | 데이터의 변경 이력을 '기간 기반'과 '범용 감사 로그' 방식으로 관리하여 추적성과 정합성을 보장합니다. | `GET /audit-logs`                                            |