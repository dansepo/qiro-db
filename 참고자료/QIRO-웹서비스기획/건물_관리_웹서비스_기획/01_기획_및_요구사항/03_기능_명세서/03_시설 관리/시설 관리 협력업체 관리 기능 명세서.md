# 🔩 QIRO - 시설 관리 협력업체 관리 기능 명세서

## 1. 문서 정보
- **문서명:** QIRO - 시설 관리 협력업체 관리 기능 명세서
- **기능 ID (선택 사항):** F-VENDMGMT-001 (Vendor Management for Facility)
- **관련 요구사항 ID:** (예: QIRO-FR-FM-020, QIRO-FR-CMN-005)
- **관련 사용자 스토리 ID:** (예: US-BM-XXX, US-FMGR-XXX)
- **작성일:** 2025년 06월 02일
- **최종 수정일:** 2025년 06월 02일
- **작성자:** QIRO 기획팀
- **검토자/승인자 (선택 사항):** (이름 또는 팀)
- **문서 버전:** 1.0

## 2. 기능 개요
### 2.1. 목적
건물 내 시설물의 유지보수, 점검, 수리 등의 업무를 수행하는 외부 협력업체(이하 '업체')의 정보를 체계적으로 등록, 조회, 수정 및 관리한다. 이를 통해 신속하고 적합한 업체 선정, 효율적인 작업 의뢰, 계약 관리 및 업체 평가의 기초를 마련한다.

### 2.2. 설명
본 기능은 시설 관리 업무와 관련된 협력업체의 기본 정보(업체명, 사업자 정보, 연락처 등), 전문 서비스 분야(예: 전기, 소방, 엘리베이터, 냉난방), 담당자 정보, 계약 조건 및 관련 문서 등을 관리하는 CRUD 기능을 제공한다. 등록된 업체 정보는 "시설 점검 및 유지보수 관리" 또는 "작업 오더 관리" 기능 등에서 작업 수행 업체를 지정할 때 활용된다.

### 2.3. 범위
- **In-Scope (포함 범위):**
    - 신규 협력업체 정보 등록.
    - 협력업체 목록 조회 (업체명, 전문 분야, 연락처, 상태 등으로 검색 및 필터링).
    - 협력업체 상세 정보 조회 및 수정.
    - 업체별 담당자 정보 등록 및 관리 (다수 등록 가능).
    - 업체와의 서비스 계약 정보 관리 (계약 기간, 주요 조건 요약, 계약서 파일 첨부).
    - 업체별 전문 서비스 분야(태그 또는 카테고리 형태) 지정 및 관리.
    - 업체 상태 관리 (예: `활성`, `비활성`, `계약만료`, `심사중`).
    - (선택) 업체 관련 간단한 메모 또는 평가 기록.
- **Out-of-Scope (제외 범위):**
    - 실제 작업 오더(Work Order) 발주, 진행 상황 추적, 완료 처리 (이는 별도의 "작업 오더 관리" 또는 "하자보수 관리" 기능).
    - 업체에 대한 상세 정량적 평가 시스템 (예: 별점, KPI 기반 평가).
    - 업체 서비스 비용 정산 및 세금계산서 처리 (이는 별도 "비용 관리" 또는 "회계 관리" 기능).
    - 전자 계약 체결 기능.

## 3. 사용자 인터페이스 (UI) 및 상호작용
### 3.1. 관련 화면
- `관리자 포털 > 시설 관리 > 협력업체 관리` (가칭)

### 3.2. UI 요소별 상세 설명 (일반적인 예시)
- **화면 1: 협력업체 목록 조회 화면**
    | UI 요소 ID (선택) | 요소명 (Label)        | 유형 (Type)            | 기본값/표시 데이터 | 동작 설명                                                    | 비고                              |
    | :---------------- | :-------------------- | :--------------------- | :----------------- | :----------------------------------------------------------- | :-------------------------------- |
    | VM-LST-01         | [검색] 입력 필드      | 입력 필드              | -                  | 업체명, 사업자번호, 담당자명, 연락처 등으로 검색             |                                   |
    | VM-LST-02         | [전문 분야] 필터      | 다중선택 드롭다운/태그 | 전체               | 특정 전문 분야(예: 전기, 소방)를 가진 업체만 필터링          |                                   |
    | VM-LST-03         | [상태] 필터           | 드롭다운               | 전체               | 업체의 계약 상태(활성, 계약만료 등)별 필터링                 |                                   |
    | VM-LST-04         | [검색/필터 적용] 버튼 | 버튼                   | -                  | 입력/선택된 조건으로 업체 목록 조회                          |                                   |
    | VM-LST-05         | [+ 업체 추가] 버튼    | 버튼                   | -                  | '협력업체 등록 폼 화면'으로 이동                             |                                   |
    | VM-LST-06         | 협력업체 목록         | 표                     | -                  | 업체명, 주 전문분야, 대표 연락처, 주 담당자, 계약 상태, (관리 버튼) 등을 표시 | 정렬, 클릭 시 상세 조회 화면 이동 |
    | VM-LST-07         | 페이지네이션          | 페이지네이션           | 1                  | 목록이 많을 경우 페이지 이동                                 |                                   |

- **화면 2: 협력업체 등록/수정 폼 화면**
    * **탭 또는 섹션 구성 제안:** 업체 기본 정보, 담당자 정보, 전문 분야 및 서비스, 계약 정보, (선택) 메모 및 이력
    | UI 요소 ID (선택) | 요소명 (Label)            | 유형 (Type)                | 예시/설명                                                    | 유효성 규칙/제약조건                           |
    | :---------------- | :------------------------ | :------------------------- | :----------------------------------------------------------- | :--------------------------------------------- |
    | VM-FRM-01         | 업체명                    | 입력 필드                  |                                                              | 필수, 최대 100자                               |
    | VM-FRM-02         | 사업자등록번호            | 입력 필드                  |                                                              | 필수, 형식 검증, 중복 불가 (또는 중복 시 경고) |
    | VM-FRM-03         | 대표자명                  | 입력 필드                  |                                                              | 최대 30자                                      |
    | VM-FRM-04         | 주소                      | 주소 검색                  | (우편번호 API 연동)                                          |                                                |
    | VM-FRM-05         | 대표 전화번호             | 입력 필드                  |                                                              | 전화번호 형식                                  |
    | VM-FRM-06         | 대표 이메일               | 입력 필드                  |                                                              | 이메일 형식                                    |
    | VM-FRM-07         | **전문 분야/서비스 유형** | 다중선택 체크박스/태그입력 | 전기, 소방, 배관, 냉난방, 승강기, 청소 등 (마스터 데이터에서 선택) | 최소 1개 이상 선택 권장                        |
    | VM-FRM-08         | **담당자 정보 추가**      | 버튼/반복 영역             | 클릭 시 담당자 정보(이름, 직통번호, 이메일, 직책) 입력 필드 세트 추가 | 각 담당자 정보 유효성 검증                     |
    | VM-FRM-09         | **계약 정보:**            |                            |                                                              |                                                |
    | VM-FRM-09a        | 계약명 (선택)             | 입력 필드                  | 예: "2025년 연간 시설 유지보수 계약"                         |                                                |
    | VM-FRM-09b        | 계약 시작일               | 날짜 선택                  |                                                              |                                                |
    | VM-FRM-09c        | 계약 종료일               | 날짜 선택                  |                                                              | 시작일 이후                                    |
    | VM-FRM-09d        | 계약 조건 요약 (선택)     | 텍스트 영역                | 주요 조건, 단가 기준 등                                      |                                                |
    | VM-FRM-09e        | 계약서 첨부파일           | 파일 업로드                | 스캔된 계약서, 견적서 등 (다중 파일 업로드 지원)             | 파일 형식/크기 제한                            |
    | VM-FRM-10         | 업체 상태                 | 드롭다운                   | 활성, 비활성, 계약만료 등                                    | 필수 (기본값 '활성')                           |
    | VM-FRM-11         | 비고/메모 (선택)          | 텍스트 영역                | 업체 관련 특이사항, 내부 평가 등                             |                                                |
    | VM-FRM-12         | [저장], [취소] 버튼       | 버튼                       |                                                              |                                                |

#### 3.3. 주요 사용자 시나리오 (흐름)
- **시나리오 1: 신규 시설 관리 협력업체 등록**
    1. 관리자가 '협력업체 목록 조회 화면'에서 [+ 업체 추가] 버튼을 클릭한다.
    2. '협력업체 등록 폼 화면'으로 이동한다.
    3. 관리자가 업체명, 사업자번호, 연락처 등 기본 정보를 입력한다.
    4. 해당 업체의 전문 서비스 분야를 선택하거나 입력한다.
    5. 주요 담당자 정보를 1명 이상 등록한다.
    6. (선택) 업체와의 계약 정보를 입력하고 계약서 파일을 첨부한다.
    7. 모든 정보 입력 후 [저장] 버튼을 클릭한다.
    8. 시스템은 유효성 검사 후 업체 정보를 저장하고, "협력업체 정보가 성공적으로 등록되었습니다." 메시지를 표시한 후 목록 화면으로 이동한다.
- **시나리오 2: 특정 전문 분야의 협력업체 검색**
    1. 관리자가 '협력업체 목록 조회 화면'의 [전문 분야] 필터에서 "승강기"를 선택한다.
    2. (선택) [상태] 필터에서 "활성"을 선택한다.
    3. [검색/필터 적용] 버튼을 클릭한다.
    4. 시스템은 승강기 전문 분야의 활성 상태인 협력업체 목록만 표시한다.
- **시나리오 3: 협력업체 계약 정보 업데이트**
    1. 관리자가 목록에서 특정 업체를 선택하여 수정 화면으로 진입한다.
    2. '계약 정보' 섹션에서 기존 계약 내용을 수정하거나, 새로운 계약 정보를 추가한다 (예: 계약 갱신).
    3. [저장] 버튼을 클릭하여 변경사항을 저장한다.

### 4. 데이터 요구사항
#### 4.1. 입력 데이터
- 업체 기본 정보: 업체명, 사업자등록번호, 대표자명, 주소, 대표 연락처, 이메일, 업체 상태.
- 전문 분야/서비스 유형 (다중 선택 가능).
- 업체 담당자 정보: 담당자명, 직책, 직통번호, 이메일.
- 계약 정보: 계약명, 계약 기간(시작일, 종료일), 조건 요약, 계약서 스캔 파일 등.

#### 4.2. 출력 데이터 (화면 표시 및 내보내기용)
- 협력업체 목록 (주요 정보 요약).
- 협력업체 상세 정보 (모든 등록 정보).
- 특정 전문 분야 또는 상태의 업체 목록.
- (연계) 업체별 작업 이력 또는 평가 요약 (별도 기능에서 데이터 참조 시).

#### 4.3. 협력업체 (Vendor) 엔티티 속성 (예시)
| 속성명 (Attribute)     | 데이터 타입 (Type) | 필수 | 설명                                                     |
| :--------------------- | :----------------- | :--- | :------------------------------------------------------- |
| `vendorId`             | UUID / Long (PK)   | Y    | 협력업체 고유 ID                                         |
| `companyName`          | String             | Y    | 업체명                                                   |
| `businessRegNumber`    | String             | Y    | 사업자등록번호                                           |
| `ceoName`              | String             | N    | 대표자명                                                 |
| `address`              | String             | N    | 주소                                                     |
| `primaryPhone`         | String             | Y    | 대표 전화번호                                            |
| `primaryEmail`         | String             | N    | 대표 이메일                                              |
| `status`               | Enum / String      | Y    | 업체 상태 (예: `ACTIVE`, `INACTIVE`, `EXPIRED_CONTRACT`) |
| `serviceTypes`         | List<String/Enum>  | Y    | 제공 서비스 유형/전문 분야 목록 (코드화)                 |
| `remarks`              | Text               | N    | 비고                                                     |
| ... (생성/수정일시 등) |                    |      |                                                          |

#### 4.4. 업체 담당자 (VendorContactPerson) 엔티티 (예시, Vendor에 One-to-Many)
| 속성명 (Attribute) | 데이터 타입 (Type) | 필수 | 설명             |
| :----------------- | :----------------- | :--- | :--------------- |
| `contactPersonId`  | UUID / Long (PK)   | Y    | 담당자 고유 ID   |
| `vendorId`         | UUID / Long (FK)   | Y    | 소속 협력업체 ID |
| `name`             | String             | Y    | 담당자명         |
| `position`         | String             | N    | 직책             |
| `phone`            | String             | Y    | 직통 연락처      |
| `email`            | String             | N    | 이메일 주소      |

#### 4.5. 업체 계약 (VendorContract) 엔티티 (예시, Vendor에 One-to-Many 또는 별도 관리)
| 속성명 (Attribute)      | 데이터 타입 (Type) | 필수 | 설명                                       |
| :---------------------- | :----------------- | :--- | :----------------------------------------- |
| `vendorContractId`      | UUID / Long (PK)   | Y    | 계약 고유 ID                               |
| `vendorId`              | UUID / Long (FK)   | Y    | 협력업체 ID                                |
| `contractName`          | String             | N    | 계약명 (예: "2025년 승강기 유지보수 계약") |
| `startDate`             | Date               | Y    | 계약 시작일                                |
| `endDate`               | Date               | Y    | 계약 종료일                                |
| `termsSummary`          | Text               | N    | 주요 계약 조건 요약                        |
| `contractFileReference` | String             | N    | 계약서 파일 참조 (S3 키 등)                |
| `isActiveContract`      | Boolean            | Y    | 현재 유효 계약 여부                        |

### 5. 처리 로직 및 비즈니스 규칙
- **R-VENDMGMT-001:** 사업자등록번호는 시스템 내에서 고유해야 한다 (중복 방지).
- **R-VENDMGMT-002:** '전문 분야/서비스 유형'은 다중 선택이 가능해야 하며, 관리자가 사전에 정의한 마스터 코드 목록에서 선택하도록 한다.
- **R-VENDMGMT-003:** 계약 종료일이 X일 이내로 다가온 '활성' 상태의 업체는 '계약 만료 예정' 상태로 자동 변경되거나, 관리자에게 알림을 줄 수 있다.
- **R-VENDMGMT-004:** 업체 정보 삭제는 해당 업체에 배정된 미완료 작업 오더가 없거나, 최근 X개월 내 서비스 이력이 없는 경우에만 가능하다 (또는 '비활성' 처리).
- **R-VENDMGMT-005:** 업체 상태가 '비활성' 또는 '계약만료'인 경우, 신규 작업 의뢰 대상에서 제외된다.

### 6. 오류 처리 및 예외 관리
| 오류 코드 (선택) | 발생 조건                     | 오류 메시지 (User-facing)                                    |
| :--------------- | :---------------------------- | :----------------------------------------------------------- |
| E-VENDMGMT-01    | 필수 입력 항목 누락           | "[필드명]은(는) 필수 입력 항목입니다."                       |
| E-VENDMGMT-02    | 사업자등록번호 형식 오류/중복 | "유효하지 않거나 이미 등록된 사업자번호입니다."              |
| E-VENDMGMT-03    | 연락처/이메일 형식 오류       | "올바른 형식의 [연락처/이메일] 주소를 입력해주세요."         |
| E-VENDMGMT-04    | 삭제 불가 조건 위배           | "해당 업체는 진행 중인 작업이 있어 삭제할 수 없습니다. '비활성'으로 상태를 변경해주세요." |

### 7. (기능별) 성능 요구사항
- P-VENDMGMT-01: 협력업체 목록 조회 시 (1,000개 업체, 다중 필터 조건) 3초 이내 응답.
- P-VENDMGMT-02: 협력업체 정보 저장(생성/수정) 시 1.5초 이내 처리 완료.

### 8. (기능별) 보안 요구사항
- S-VENDMGMT-01: 협력업체 관리 기능은 '총괄관리자', '관리소장' 등 인가된 역할만 접근 가능하다.
- S-VENDMGMT-02: 계약서 등 첨부 파일은 안전하게 저장(암호화 고려)하고, 접근 권한을 통제한다.
- S-VENDMGMT-03: 업체 정보의 주요 변경(사업자번호, 계약 조건, 담당자 등) 이력은 감사 로그로 기록한다.

### 9. 다른 기능/모듈과의 연관성
- **시설 점검 및 유지보수 관리:** 점검 수행 업체 또는 유지보수 작업 수행 업체를 본 기능에서 등록된 업체 정보 중에서 선택하거나 참조한다. '점검 이력'에 업체명이 기록될 수 있다.
- **(향후 확장) 작업 오더 관리 (Work Order Management):** 시설물 고장/수리 요청 발생 시, 적합한 전문 분야의 협력업체를 본 기능의 데이터를 기반으로 검색하고 작업 오더를 발주한다.
- **(향후 확장) 비용 관리 / 회계 관리:** 협력업체에 지급된 서비스 비용, 계약금 등을 기록하고 정산할 때 본 기능의 업체 및 계약 정보를 참조한다.

### 10. (선택 사항) 테스트 고려 사항
- 다양한 정보(필수/선택, 다수 담당자, 다수 계약)를 가진 협력업체 등록/수정/삭제 시나리오 테스트.
- 모든 검색 조건 및 필터 조합에 대한 정확성 테스트.
- 계약 기간 만료에 따른 상태 변경 또는 알림 기능 테스트 (구현 시).
- 첨부 파일 관리(업로드, 다운로드, 삭제) 기능 테스트.
- 업체 정보가 타 모듈(시설 점검, 작업 오더 등)에 정상적으로 연동되는지 확인.

### 11. 용어 정의 (선택 사항)
- **협력업체 (Vendor/Contractor):** 건물 시설의 유지보수, 점검, 수리, 청소 등 특정 서비스를 제공하기로 계약한 외부 업체.
- **전문 분야 (Specialization/Service Type):** 협력업체가 제공하는 주요 서비스의 종류 (예: 전기 공사, 소방 점검, 엘리베이터 유지보수).

### 12. 문서 이력
| 버전 | 날짜             | 작성자      | 주요 변경 내용                                |
| :--- | :--------------- | :---------- | :-------------------------------------------- |
| 1.0  | 2025년 06월 02일 | QIRO 기획팀 | 시설 관리 협력업체 관리 기능 명세서 초안 작성 |

---