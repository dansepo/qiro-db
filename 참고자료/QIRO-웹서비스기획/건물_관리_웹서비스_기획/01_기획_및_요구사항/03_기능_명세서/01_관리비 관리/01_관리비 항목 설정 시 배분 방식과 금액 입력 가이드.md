# **관리비 항목 설정 시 배분 방식과 금액 입력 가이드**

### **1. 문서 개요**

본 문서는 건물관리 시스템의 **'청구 항목 설정'** 기능에서, 사용자가 선택하는 **배분/계산 방식**에 따라 **단가 또는 금액 필드**가 어떻게 동작하고 어떤 의미를 갖는지를 정의합니다. 이는 시스템의 유연성을 보장하고 사용자 오류를 방지하기 위한 핵심 설계 가이드입니다.

### **2. 핵심 원칙: "규칙 설정"과 "데이터 입력"의 분리**

관리비 항목 처리 방식은 크게 두 가지로 나뉩니다.

1. **규칙 우선 설정:** '청구 항목 설정' 화면에서는 **고정된 단가나 금액 규칙을 '미리' 설정**하고, 매월 변하는 데이터(예: 사용량)만 입력하여 자동으로 계산합니다.
2. **총액 사후 입력:** '청구 항목 설정' 화면에서는 **비용을 어떻게 나눌지에 대한 '배분 규칙'만 설정**하고, 매월 발생하는 **'비용 총액'은 별도의 화면에서 '나중에' 입력**하여 배분합니다.

### **3. 배분/계산 방식별 금액 필드 동작 명세**

#### **그룹 1: '단가' 또는 '고정액'을 미리 설정하는 방식**

'청구 항목 설정' 화면에서 입력하는 금액이 월별 관리비 계산의 핵심 기준이 됩니다.

| 계산 방식 (`allocation_method`)                | 설정 화면의 금액 필드 의미 | 설정 화면 (UI) 동작                                          | 월별 부과 업무                                               | 사용 예시                                                    |
| ---------------------------------------------- | -------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **`RATE_PER_QUANTITY`** (수량 기반 단가 배분)  | **단위당 단가**            | `단위당 단가(원)`와 `기준 수량`을 입력받습니다. 예: 단가: 120, 기준 수량: 세대별 사용량 | 관리자는 매월 각 호실의 **사용량(Quantity)만** 입력합니다.   | '세대 전기료' 항목을 이 방식으로 설정하고 단가를 '120원/kWh'로 입력하면, 매월 각 세대의 전기 사용량(kWh)만 입력하여 요금을 계산합니다. |
| **`TIERED_RATE_PER_USAGE`** (구간별 요율 배분) | **구간별 단가 규칙**       | 사용량 구간과 해당 구간의 단가를 설정하는 전용 UI를 제공합니다. 예: 0~100kWh: 90원 | 관리자는 매월 각 호실의 **총 사용량만** 입력합니다. 시스템이 구간별로 요금을 자동 계산합니다. | 누진세가 적용되는 '세대 전기료' 항목을 이 방식으로 설정하고, 한전의 요금표와 동일한 구간별 단가를 미리 입력해 둡니다. |
| **`FIXED_AMOUNT`** (고정액 부과)               | **호실별 고정 부과액**     | `호실별 고정 부과액(원)`을 입력받습니다. 예: 30,000          | **별도 작업 없음.** 설정된 대상에게 매월 자동으로 고정액이 부과됩니다. | '헬스장 이용료' 항목을 이 방식으로 설정하고 금액을 '30,000원'으로 입력하면, 신청자에게 매월 3만원이 자동으로 부과됩니다. |

#### **그룹 2: '월별 총액'을 나중에 입력하는 방식**

'청구 항목 설정' 화면에서는 금액을 입력하지 않고, **비용을 배분할 '규칙'만 정의**합니다.

| 계산 방식 (`allocation_method`)             | 설정 화면의 금액 필드 의미 | 설정 화면 (UI) 동작                                          | 월별 부과 업무                                               | 사용 예시                                                    |
| ------------------------------------------- | -------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **`TOTAL_PER_AREA`** (총액 면적 비례 배분)  | **금액 입력 없음**         | `배분 기준 면적`(전용/공급/계약)만 선택합니다. 금액 입력 필드는 비활성화됩니다. | 관리자는 **별도의 화면**에서 '이번 달 청소 용역비 **총액**'을 입력합니다. | '청소비' 항목을 이 방식으로 설정해두면, 관리자가 매월 입력하는 청소비 총액을 시스템이 자동으로 각 세대 면적에 비례하여 배분합니다. |
| **`TOTAL_PER_UNIT_EQUAL`** (총액 균등 배분) | **금액 입력 없음**         | 추가 설정이 필요 없습니다. 금액 입력 필드는 비활성화됩니다.  | 관리자는 **별도의 화면**에서 '이번 달 TV 수신료 **총액**'을 입력합니다. | 'TV 수신료' 항목을 이 방식으로 설정해두면, 관리자가 매월 입력하는 총액을 시스템이 자동으로 대상 세대수에 맞게 N분의 1로 배분합니다. |

#### **그룹 3: 월별 '직접' 금액을 입력하는 방식**

'청구 항목 설정'에서는 어떠한 금액 정보도 설정하지 않습니다.

| 계산 방식 (`allocation_method`)          | 설정 화면의 금액 필드 의미 | 설정 화면 (UI) 동작                                         | 월별 부과 업무                                               | 사용 예시                                                    |
| ---------------------------------------- | -------------------------- | ----------------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **`DIRECT_ASSIGNMENT`** (직접 지정 부과) | **금액 입력 없음**         | 추가 설정이 필요 없습니다. 금액 입력 필드는 비활성화됩니다. | 관리자는 **'일회성 비용 부과' 화면**에서 특정 호실을 지정하고 **부과할 금액을 직접 입력**합니다. | 101호에 유리 파손 수리비 15만원을 부과해야 할 때, 관리자는 '일회성 비용 부과' 기능에서 101호를 선택하고 150,000원을 직접 입력합니다. |

### **4. 결론**

이처럼 시스템은 **'항목 설정'**과 **'월별 데이터 입력'**의 역할을 명확히 구분해야 합니다. 사용자는 '항목 설정' 시점에서 해당 항목의 성격에 맞는 배분/계산 방식을 선택하고, 그에 따라 시스템은 필요한 고정값(단가, 고정액)을 입력받거나, 또는 월별 총액을 입력받을 준비를 합니다. 이 구조는 시스템의 유연성과 사용자 편의성을 모두 만족시키는 핵심적인 설계입니다.