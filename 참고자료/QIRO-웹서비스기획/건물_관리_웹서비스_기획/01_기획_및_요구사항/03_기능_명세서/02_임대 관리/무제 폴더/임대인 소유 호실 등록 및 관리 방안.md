# **임대인 소유 호실 등록 및 관리 방안**

### **1. 문서 개요**

본 문서는 **다수의 건물을 관리하는** 시스템에서, 관리자가 **선택한 특정 건물**을 단위로 **임대인(소유주) 정보를 생성**하고, 해당 임대인이 **소유한 여러 호실을 등록하여 연결**하는 전체적인 업무 절차와 화면 설계 방안을 정의합니다.

### **2. 핵심 원칙: "주체(임대인) 중심의 호실 할당"**

이 설계의 핵심은 **임대인과 호실 정보를 각각 독립적으로 관리**하되, **임대인 중심의 화면에서 소유 호실을 지정**하는 직관적인 방식을 채택하는 것입니다. 이를 통해 관리자는 "이 임대인은 어떤 호실들을 소유하고 있는가?"라는 질문에 대한 답을 한 화면에서 찾고 관리할 수 있습니다.

> **개선된 업무 흐름:** `① 호실/임대인 정보 각각 등록` → `② 임대인 목록 또는 상세 화면에서, 현재 작업중인 건물의 미지정 호실을 선택하여 연결`

### **3. 등록 및 관리 절차**

#### **1단계 (선행 작업): 기초 데이터 등록**

먼저, 시스템에 필요한 기초 데이터들을 각각 등록합니다. 이 단계에서는 서로의 등록 순서에 의존하지 않습니다.

- **A. 건물 선택 및 호실 정보 등록:**
  - **관련 화면:** `[기초 정보] > [건물 관리]` 메뉴
  - **동작:**
    1. 관리자는 자신이 관리하는 **여러 건물 목록**에서, 이번에 작업할 건물(예: '강남파이낸스센터') 하나를 **선택**합니다. 이 선택은 사용자의 현재 작업 컨텍스트가 됩니다.
    2. 선택한 건물의 상세 화면 내 **`[호실 관리]`** 탭으로 이동하여, 해당 건물의 모든 호실(101호, 102호, ...) 정보를 등록합니다.
    3. 호실 정보 등록 시 **'소유주' 필드는 비워둘 수 있습니다.** 이렇게 등록된 호실은 '소유주 미지정' 상태가 됩니다.
- **B. 임대인(소유주) 정보 등록:**
  - **관련 화면:** `[임대 관리] > [임대인 관리]` 메뉴
  - **동작:** '홍길동', '㈜미래건설' 등 모든 임대인(소유주) 정보를 마스터 데이터로 등록합니다. 이 정보는 특정 건물에 종속되지 않고, 회사가 관리하는 모든 건물에서 공통으로 사용할 수 있습니다.

#### **2단계 (핵심 기능): 임대인에게 소유 호실 할당**

임대인에게 소유 호실을 할당하는 방법은 **빠른 추가**와 **상세 화면 추가** 두 가지 방식을 모두 제공하여 사용 편의성을 높입니다.

##### **방법 1: 임대인 목록에서 빠르게 추가하기 (Quick Action)**

- **관련 화면:** `[임대 관리] > [임대인 관리]` 목록 화면
- **화면 구성:** 임대인 목록의 각 행(row)마다 소유 호실을 바로 추가할 수 있는 **`[+ 호실 추가]`** 버튼을 제공하여, 불필요한 화면 이동을 최소화합니다.

| 임대인명   | 소유 호실 수 | 관리                              |
| ---------- | ------------ | --------------------------------- |
| 홍길동     | 3            | **`[+ 호실 추가]`** `[상세 보기]` |
| ㈜미래건설 | 10           | **`[+ 호실 추가]`** `[상세 보기]` |

- **호실 할당 절차:**
  1. 관리자가 '홍길동' 옆의 **`[+ 호실 추가]`** 버튼을 클릭합니다.
  2. **'임대인 미지정 호실 목록' 팝업(Modal) 창**이 나타납니다.
     - 이 팝업에는 현재 관리자가 작업 중인 **'강남파이낸스센터' 건물의 호실 중, `owner_id`가 비어있는(NULL) 모든 호실의 목록**이 체크박스와 함께 표시됩니다.
  3. 관리자는 이 목록에서 '홍길동'이 소유한 호실들을 체크합니다.
  4. **[저장]** 버튼을 클릭하면, 선택된 호실들의 `owner_id` 컬럼에 '홍길동'의 고유 ID(`owner_id`)가 업데이트됩니다.
  5. 목록의 '소유 호실 수'가 업데이트되어 즉시 변경 사항을 확인할 수 있습니다.

##### **방법 2: 임대인 상세 화면에서 안전하게 추가하기 (Standard Action)**

- **관련 화면:** `[임대 관리] > [임대인 관리]`에서 특정 임대인(예: '홍길동')을 클릭하여 진입하는 **'임대인 상세 관리'** 화면
- **화면 구성:**
  1. **임대인 기본 정보:** '홍길동'의 연락처, 이메일 등 기본 정보가 표시됩니다.
  2. **소유 호실 목록:** 현재 '홍길동'이 소유한 것으로 등록된 호실들의 목록이 **건물별로 그룹화**되어 표시됩니다.
  3. **핵심 UI:** 소유 호실 목록 영역에 **`[+ 소유 호실 추가]`** 버튼이 제공됩니다.
- **호실 할당 절차:**
  1. 관리자가 **`[+ 소유 호실 추가]`** 버튼을 클릭합니다.
  2. '임대인 미지정 호실 목록' 팝업 창이 나타납니다 (방법 1과 동일).
  3. 팝업에서 소유 호실들을 체크하고 저장하면, '소유 호실 목록'이 새로고침되어 방금 추가된 호실들이 표시됩니다.

### **4. 이 방식의 장점**

- **직관적인 UX:** 관리자는 목록 화면에서 소유 관계를 한눈에 파악하고, 상세 화면에 들어갈 필요 없이 즉시 호실을 추가할 수 있습니다.
- **유연성:** 호실을 먼저 대량으로 등록해두고 나중에 소유주를 할당하거나, 소유주를 먼저 등록하는 등 작업 순서에 제약이 없습니다.
- **업무 효율성:** 관리자가 현재 작업 중인 건물에 집중할 수 있도록 하여, 여러 건물 정보가 섞여 발생하는 혼란과 실수를 방지합니다.