# **신규 임대 계약 등록 방안 (호실 중심)**

### **1. 문서 개요**

본 문서는 **'호실 중심 데이터 모델'**을 기반으로, 관리자가 **특정 호실을 먼저 선택**하고 해당 호실에 대한 **신규 임대차 계약을 등록**하는, 가장 직관적이고 효율적인 업무 절차와 화면 설계 방안을 정의합니다.

### **2. 핵심 원칙: "자산(호실)에서 계약으로"**

이 설계의 핵심은 모든 임대 계약이 물리적 자산인 **'호실'에 귀속**된다는 점에 착안하여, 사용자의 업무 시작점을 **'호실 관리' 화면**으로 유도하는 것입니다. 이는 "어떤 빈 방에 새로운 계약을 넣을까?"라는 실제 업무의 사고 흐름과 완벽하게 일치합니다.

> **업무의 기본 순서:** `① 호실 관리 화면에서 공실 선택` → `② 해당 호실에 대한 새 계약 정보 입력`

### **3. 신규 계약 등록 절차**

#### **1단계 (선행 작업): 임차인 정보 등록**

- **관련 화면:** `[임대 관리] > [임차인 관리]` 메뉴
- **동작:** 새로운 계약을 맺을 임차인('김세입')의 정보가 시스템에 없다면, 먼저 이 화면에서 임차인 정보를 마스터 데이터로 등록합니다.

#### **2단계 (핵심 기능): 호실 관리 화면에서 계약 등록 시작**

- **관련 화면:** `[건물 정보] > [호실 관리]` 목록 화면
- **화면 구성:** 호실 목록에는 각 호실의 **현재 계약 상태(공실/계약중)**가 명확하게 표시됩니다.

| 호실 번호 | 현재 계약 상태  | 관리                                 |
| --------- | --------------- | ------------------------------------ |
| 101호     | 계약중 (홍길동) | `[상세 보기]`                        |
| 102호     | **공실**        | **`[+ 새 임대 계약]`** `[상세 보기]` |
| 103호     | **공실**        | **`[+ 새 임대 계약]`** `[상세 보기]` |

- **계약 등록 시작 절차:**
  1. 관리자는 목록에서 새로운 계약을 등록할 **'102호'** 옆의 **`[+ 새 임대 계약]`** 버튼을 클릭합니다.
  2. 시스템은 **'신규 임대차 계약 등록'** 화면으로 이동합니다.

#### **3단계: 신규 임대차 계약 정보 입력**

'신규 임대차 계약 등록' 화면은 다음과 같이 구성됩니다.

| UI 요소                 | 입력 방식                  | 설명 및 동작 방식                                            |
| ----------------------- | -------------------------- | ------------------------------------------------------------ |
| **건물명**              | 고정 텍스트                | **'강남파이낸스센터'** (현재 작업중인 건물)                  |
| **호실 번호**           | 고정 텍스트                | **'102호'** (이전 화면에서 선택한 호실)                      |
| **임차인**              | **검색/선택 (필수)**       | `[검색]` 버튼을 눌러, 1단계에서 등록한 **'김세입'**을 검색하여 선택합니다. |
| **계약일**              | 날짜 선택                  | 계약서상의 계약 체결일을 입력합니다.                         |
| **계약 기간**           | 날짜 선택 (시작일, 종료일) | 임대차 기간을 입력합니다.                                    |
| **보증금 및 월 임대료** | 숫자 입력                  | 계약서상의 보증금과 월 임대료를 입력합니다.                  |
| **임대료 납부 정보**    | 드롭다운 및 텍스트 입력    | 납부일, 납부 방법, 납부 계좌 등을 설정합니다.                |
| *`(기타 계약 조건)`*    |                            |                                                              |

- **데이터 처리 (저장 시):**
  1. 관리자가 모든 정보를 입력하고 **[저장]** 버튼을 클릭합니다.
  2. 시스템은 `bms.lease_contracts` 테이블에 새로운 계약 정보를 **`INSERT`** 합니다.
  3. 동시에, `bms.units` 테이블에서 **102호의 `current_lease_contract_id`를 방금 생성된 새 계약의 ID로 `UPDATE`** 합니다.
  4. 저장이 완료되면, '호실 관리' 목록 화면으로 돌아가고, 102호의 상태는 **'계약중 (김세입)'**으로 변경되어 표시됩니다.

### **4. 이 방식의 장점**

- **직관적인 UX:** 관리자는 "어떤 방이 비어있지?"를 먼저 확인하고, 그 방에 대한 계약을 바로 등록하는, 실제 업무와 동일한 흐름으로 작업을 처리할 수 있습니다.
- **오류 감소:** 계약 대상 호실이 명확하게 고정된 상태에서 작업을 시작하므로, 엉뚱한 호실에 계약을 잘못 연결하는 심각한 실수를 원천적으로 방지합니다.
- **데이터의 명확성:** 모든 계약은 항상 특정 호실에 귀속된다는 '호실 중심'의 데이터 모델 철학을 완벽하게 구현합니다.