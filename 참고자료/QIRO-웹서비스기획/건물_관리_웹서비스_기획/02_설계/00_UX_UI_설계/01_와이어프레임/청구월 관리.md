## 🖥️ QIRO 청구월 관리 UI/UX 와이어프레임 제안

### 1. 청구월 목록 및 관리 화면 (메인 화면)

- **화면 제목:** `청구월 관리`

- **화면 부제목 (선택적):** `월별 관리비 청구 및 마감 작업을 관리합니다.`

- 상단 액션 영역:

  - `[+ 신규 청구월 생성]` 버튼 (오른쪽 정렬)

- 필터 및 검색 영역:

  - `조회 연도`: 드롭다운 (기본값: 현재 연도)
  - `상태`: 드롭다운 (옵션: 전체, 준비중, 진행중, 완료 / 기본값: 전체)
  - `[검색]` 또는 `[필터 적용]` 버튼

- 시스템 운영 규칙 안내 (눈에 잘 띄는 곳에 정보성 텍스트로 표시):

  - `💡 정보: 여러 개의 '준비중' 상태 청구월을 미리 생성하여 작업할 수 있습니다.`
  - `⚠️ 주의: 실제 관리비 산정, 고지, 수납 업무가 진행되는 '진행중' 상태의 청구월은 동시에 하나만 운영될 수 있습니다.`

- 청구월 목록 테이블:

  - 컬럼:

    1. `청구 연월` (예: 2025년 07월) - (클릭 시 해당 월 상세 정보 또는 작업 화면으로 이동 가능)

    2. `상태` (예: 🔵 준비중, 🟠 진행중, ✅ 완료) - (상태별로 색상 태그/배지 사용)

    3. `내부 진행 현황` (선택적, 요약 정보 또는 진행 바) - (예: 데이터 입력 80%, 산정 완료, 고지 완료, 수납률 95% 등)

    4. `생성일`

    5. `최종 수정일`

    6. `마감일` (`완료` 상태일 경우)

    7. ```
       작업
       ```

        (버튼 그룹)

       - `[상세 설정]` 또는 `[데이터 가져오기/수정]` 버튼: (`준비중` 상태일 때 주로 활성화, 클릭 시 "2. 청구월 초기값 데이터 가져오기/설정 화면"으로 이동)
       - `[작업 진행]` 버튼: (`준비중`이고 모든 조건 충족 시 '진행중'으로 상태 변경 모달 호출, 또는 `진행중`일 때 다음 단계 작업 화면으로 이동 - 예: 고지서 발급, 수납 처리)
       - `[월 마감]` 버튼: (`진행중`이고 모든 조건 충족 시 '완료'로 상태 변경 모달 호출)
       - `[삭제]` 버튼: (`준비중` 상태이고 특정 조건 만족 시에만 활성화)

  - **목록 정렬:** 기본적으로 '청구 연월' 최신순 정렬. 각 컬럼명 클릭 시 해당 기준으로 정렬 가능.

  - **페이지네이션:** 목록 하단에 표시.

------

### 2. 신규 청구월 생성 모달 (또는 팝업)

- **(트리거):** "1. 청구월 목록 및 관리 화면"에서 `[+ 신규 청구월 생성]` 버튼 클릭 시.
- **모달 제목:** `신규 청구월 생성`
- 입력 필드:
  - `대상 연도:` 드롭다운 또는 숫자 입력 (기본값: 현재 연도 또는 가장 최근 청구월의 연도)
  - `대상 월:` 드롭다운 또는 숫자 입력 (기본값: 가장 최근 청구월의 다음 달)
- **안내 문구 (선택적):** `새로운 청구월은 '준비중' 상태로 생성되며, 초기값은 시스템 기본 설정(마스터 항목 및 영값)으로 채워집니다. 생성 후 '상세 설정'에서 이전 달 데이터를 선택적으로 가져올 수 있습니다.`
- 버튼 영역:
  - `[생성]` 버튼
  - `[취소]` 버튼
- 성공 시:
  - 알림: "YYYY년 MM월 청구월이 '준비중' 상태로 기본 생성되었습니다."
  - (옵션 1) 모달 닫히고 "1. 청구월 목록 및 관리 화면" 새로고침.
  - (옵션 2) 자동으로 "3. 청구월 초기값 데이터 가져오기/설정 화면"으로 이동 (방금 생성한 청구월 대상).

------

### 3. 청구월 초기값 데이터 가져오기/설정 화면

- (트리거):

  - "2. 신규 청구월 생성 모달"에서 `[생성]` 후 자동 이동.
  - "1. 청구월 목록 및 관리 화면"에서 '준비중' 상태인 청구월의 `[상세 설정]` 또는 `[데이터 가져오기/수정]` 버튼 클릭 시.

- **화면 제목:** `[YYYY년 MM월] 청구월 초기값 설정`

- 상단 정보 영역:

  - `현재 설정 대상 청구월:` YYYY년 MM월 (상태: `준비중`)
  - `직전 청구월:` YYYY년 (M-1)월 (상태: `완료` / `진행중 (산정 완료)` / `진행중 (고지 완료)` / `준비중` 등) - **이 상태에 따라 아래 옵션 및 경고가 달라짐**

- 일괄 데이터 가져오기 옵션 (화면 상단 또는 각 섹션 상단):

  - ```
    데이터 가져오기 전략 선택:
    ```

     드롭다운

    - `직전 청구월 데이터 우선 적용 (권장: 직전월 '완료' 시)`
    - `항목 설정은 직전월 값, 나머지는 기본값/신규 입력`
    - `모든 항목 마스터 기본값으로 시작`
    - `모든 항목 직접 재설정 (초기화)`

  - `[선택 전략으로 일괄 적용]` 버튼

- 세부 데이터 유형별 설정 영역 (탭 또는 아코디언 메뉴로 구성):

  - 탭 1: `항목별 설정값`

    - 테이블 헤더: `관리비 항목명` | `새 청구월 현재 값 (단가/요율 등)` | `데이터 소스 선택` | `참고: 직전월 값` | `참고: 마스터 기본값` | `비고/경고`
    - 각 행: 관리비 항목 하나
    - `데이터 소스 선택` 컬럼: 드롭다운 (`이전 달 값`, `마스터 기본값`, `직접 입력`)
    - `새 청구월 현재 값` 컬럼: "데이터 소스 선택"에 따라 자동 채워지거나 편집 가능.
    - `비고/경고` 컬럼: 직전월 데이터가 미확정일 경우 경고 아이콘(⚠️) 및 툴팁으로 상세 설명 표시. (예: "직전월 '진행중(산정완료)' 상태의 값입니다. 최종 확정 전 변경될 수 있습니다.")

  - 탭 2: `전월 검침값 (기초값)`

     (검침 항목이 있는 경우)

    - 테이블 헤더: `세대(동/호수)` | `검침 항목` | `새 청구월의 전월 검침값` | `데이터 소스 선택` | `참고: 직전월 마감(당월) 검침값` | `비고/경고`
    - `데이터 소스 선택` 컬럼: 드롭다운 (`직전 달 마감(당월) 검침값 가져오기`, `직접 입력`)
    - 경고 표시 로직 동일.

  - 탭 3: `전월 미납액`

    - 직전 청구월 상태가 `완료`가 아닌 경우:
      - 해당 탭 내용 대신 안내 메시지 표시: "직전 청구월이 아직 '완료'되지 않아 확정된 미납액을 가져올 수 없습니다. 전월 미납액은 '0'으로 우선 처리됩니다. 직전월 마감 후, 본 화면에서 또는 별도 메뉴를 통해 확정 미납액을 반드시 반영(이월)해야 합니다."
    - 직전 청구월 상태가 `완료`인 경우:
      - 테이블 헤더: `세대(동/호수)` | `직전월 확정 미납액` | `새 청구월에 이월 적용` [체크박스] | `비고`
      - 일괄 적용 버튼: `[모든 확정 미납액 이월]`

- 하단 액션 버튼 영역:

  - `[설정 내용 저장]` 버튼: 현재 설정된 값들로 청구월 초기 데이터를 최종 저장/업데이트.
  - `[목록으로]` 또는 `[닫기]` 버튼.

------

### 4. 청구월 상태 변경 모달

- **(트리거):** "1. 청구월 목록 및 관리 화면"의 특정 청구월 행에서 `[작업 진행]` 또는 `[월 마감]` 버튼 클릭 시.
- **모달 제목:** `[YYYY년 MM월] 청구월 상태 변경`
- **현재 상태 표시:** `현재 상태: [준비중 | 진행중]`
- 변경할 상태 선택:
  - 현재 '준비중' → '진행중'으로 변경 시:
    - 안내/확인 문구: "모든 기초 데이터 입력이 완료되었고, 관리비 산정을 진행하시겠습니까? '진행중' 상태로 변경 후에는 기초 데이터 수정이 제한됩니다."
    - 사전 조건 시스템 체크 결과 표시 (필수):
      - "다른 '진행중' 상태의 청구월 존재 여부: [없음 - 진행 가능 ✅ / 있음([YYYY년 MM월]) - 진행 불가 ❌]"
      - (필요시) "필수 기초 데이터 입력 완료 여부: [완료 ✅ / 미비 ❌]"
    - 버튼: `[진행중으로 변경]` (조건 미충족 시 비활성화 또는 클릭 시 오류 안내), `[취소]`
  - 현재 '진행중' → '완료'로 변경 시:
    - 안내/확인 문구: "해당 청구월의 모든 수납 및 결산 작업이 완료되었습니까? '완료' 상태로 변경 후에는 데이터 수정이 불가능하며, 다음 달로 미납액이 이월됩니다."
    - 사전 조건 시스템 체크 결과 표시 (필수):
      - "이전 모든 청구월 '완료' 여부: [완료 ✅ / 미완료 월 존재([YYYY년 MM월]) - 진행 불가 ❌]"
    - 버튼: `[완료로 변경]` (조건 미충족 시 비활성화 또는 클릭 시 오류 안내), `[취소]`
  - (제한적 롤백 시나리오 - 예: '진행중' → '준비중'):
    - 매우 강력한 경고 문구 및 되돌리는 사유 입력 필드 필요. 특정 관리자 권한 필요.

