## 🖥️ QIRO 월별 외부 고지서 청구 금액 입력 UI 와이어프레임 제안

**화면 명칭 (예시):** `월별 외부 고지서 금액 입력`

**화면 경로 (예시):** `관리자 포털 > 관리비 > 공과금 관리 > 외부 고지서 금액 입력`

### 1. 화면 구성 요소

#### 1.1. 상단 선택 영역

- `청구월 선택`

  : [ 드롭다운 목록 (예: "2025년 06월 (준비중)") ]

  - '준비중' 상태의 청구월 목록을 표시하여 사용자가 작업 대상 청구월을 선택합니다.

- `건물 선택`

  : [ 드롭다운 목록 (예: "행복아파트 A동") ] (다수 건물 관리 시)

  - 선택된 건물에 등록된 외부 고지서 고객번호 목록을 아래에 표시하기 위해 사용됩니다.

- **안내 문구 (선택적):** `선택된 청구월 및 건물에 대해 외부 공급자로부터 청구된 고지서의 총 금액을 입력합니다.`

#### 1.2. 외부 고지서 청구 금액 입력 목록/테이블 영역

- **테이블 제목 (예시):** `[2025년 06월] [행복아파트 A동] 외부 고지서 청구 금액`

- **테이블 컬럼 구성:**

  1. `고객번호` (읽기전용 - 예: `1234567890`)

  2. `별명` (읽기전용 - 예: `본관 전체 전기`)

  3. `종류` (읽기전용 - 예: `전기`)

  4. `공급자` (읽기전용 - 예: `한국전력공사`)

  5. ```
     관리비 청구 용도
     ```

      (읽기전용 - 예: 

     ```
     개별 사용료, 공용 사용료
     ```

     , 

     ```
     공용 사용료만
     ```

     , 

     ```
     개별 사용료만
     ```

     )

     - "외부 고지서 고객번호 관리"에서 설정된 `isForIndividualUsage`, `isForCommonUsage` 플래그에 따라 표시됩니다.

  6. ```
     해당 월 총 청구 금액 (원)
     ```

     : [ 숫자 입력 필드 ] (필수)

     - 해당 고객번호로 이번 청구월에 청구된 전체 금액을 입력합니다.

  7. (조건부 표시) 공용 사용료 분담액 (원):

      [ 숫자 입력 필드 ]

     - `관리비 청구 용도`가 "개별 사용료, 공용 사용료" **모두에** 해당될 경우에만 표시 및 입력 활성화됩니다.
     - 사용자가 총 청구 금액 중 공용 부분으로 배분될 금액을 직접 입력합니다.

  8. (조건부 표시) 개별 사용료 총액 (원):

      [ 숫자 입력 필드 (또는 자동계산 읽기전용) ]

     - `관리비 청구 용도`가 "개별 사용료, 공용 사용료" **모두에** 해당될 경우에만 표시됩니다.
     - **옵션 1 (자동계산):** `(총 청구 금액) - (공용 사용료 분담액)`으로 자동 계산되어 표시 (읽기전용).
     - **옵션 2 (수동입력):** 사용자가 직접 입력. 이 경우 `(공용 분담액) + (개별 총액)`이 `총 청구 금액`과 일치하는지 유효성 검사 필요.

  9. `고지서 파일 첨부 (선택)`: [ `[파일 선택]` 버튼 ] (클릭 시 파일 탐색기 열림, 업로드된 파일명 표시)

  10. `저장 상태/버튼`: 각 행별로 `[저장]` 버튼 또는 변경 시 '수정됨' 표시 후 하단에 `[일괄 저장]` 버튼.

- **테이블 각 행:** "외부 고지서 고객번호 관리"에서 선택된 건물에 등록된 고객번호 목록이 행으로 표시됩니다.

- **UI 로직 (중요):**

  - ```
    관리비 청구 용도
    ```

    가 

    "개별 사용료"만

     체크된 고객번호의 경우:

    - "공용 사용료 분담액" 필드는 숨김 또는 비활성화.
    - "개별 사용료 총액" 필드는 숨기거나, "총 청구 금액"과 동일한 값으로 자동 설정(읽기전용).

  - ```
    관리비 청구 용도
    ```

    가 

    "공용 사용료"만

     체크된 고객번호의 경우:

    - "개별 사용료 총액" 필드는 숨김 또는 비활성화.
    - "공용 사용료 분담액" 필드는 숨기거나, "총 청구 금액"과 동일한 값으로 자동 설정(읽기전용).

  - ```
    관리비 청구 용도
    ```

    가 

    "개별 사용료"와 "공용 사용료" 모두

     체크된 고객번호의 경우:

    - "공용 사용료 분담액"과 "개별 사용료 총액" 필드를 모두 활성화하여 사용자가 직접 입력하도록 합니다.
    - 이때, `(입력된 공용 사용료 분담액) + (입력된 개별 사용료 총액)`이 `해당 월 총 청구 금액`과 일치해야 한다는 유효성 검사 규칙이 적용됩니다. (또는, 하나를 입력하면 나머지가 자동 계산되는 방식도 고려)

#### 1.3. 하단 액션 버튼 영역

- `[일괄 저장]` 버튼: 현재 페이지에 입력/수정된 모든 외부 고지서 청구 금액 정보를 한 번에 저장합니다.
- `[목록으로]` 버튼 (또는 `[청구월 관리로 돌아가기]`): 이전 화면으로 이동합니다.

------

### 2. 주요 사용자 시나리오 (흐름)

- 시나리오 1: 특정 청구월의 외부 고지서별 총 청구 금액 입력
  1. 관리자가 "월별 외부 고지서 금액 입력" 화면에 접속합니다.
  2. 작업할 `[청구월 선택]` 및 (필요시) `[건물 선택]`을 합니다.
  3. 시스템은 선택된 건물에 등록된 외부 고지서 고객번호 목록과 입력 필드를 표시합니다.
  4. 관리자는 각 고객번호 행의 `[해당 월 총 청구 금액]` 필드에 실제 수령한 고지서의 총액을 입력합니다.
  5. 만약 특정 고객번호의 `관리비 청구 용도`가 "개별+공용"으로 설정되어 있다면, 해당 행의 `[공용 사용료 분담액]`과 `[개별 사용료 총액]` 필드에 총액을 나누어 입력합니다. (이때 두 금액의 합이 총 청구 금액과 일치해야 한다는 안내 또는 자동 계산 지원)
  6. (선택) 각 건별로 `[고지서 파일 첨부]`를 통해 스캔한 고지서 파일을 업로드합니다.
  7. 모든 입력이 완료되면 `[일괄 저장]` 버튼을 클릭합니다.
  8. 시스템은 유효성 검사 후 데이터를 저장하고, "외부 고지서 청구 금액이 성공적으로 저장되었습니다." 메시지를 표시합니다.

------

**UX 고려사항:**

- **데이터 정합성 유지:** "관리비 청구 용도"가 "개별+공용"인 경우, 사용자가 총액을 분배하여 입력하는 방식(두 개의 필드에 직접 입력) 또는 하나의 분담액(예: 공용 분담액)만 입력하면 나머지는 자동 계산해주는 방식 중 사용자 편의성과 정확성을 고려하여 결정합니다. 후자의 경우 자동 계산된 값을 명확히 보여주고 사용자가 인지할 수 있도록 해야 합니다.
- **정보 접근성:** 각 고객번호 행에 "외부 고지서 고객번호 관리"에서 설정한 `별명`, `종류`, `공급자` 정보가 명확히 표시되어 사용자가 어떤 고지서의 금액을 입력하는지 쉽게 알 수 있도록 합니다.
- **입력 편의성:** 금액 입력 필드는 숫자만 입력 가능하도록 하고, 천 단위 구분자(,) 자동 표시 등 편의 기능을 제공합니다.
- **저장 상태 피드백:** 각 행별로 또는 전체 저장 후 변경된 내용이 성공적으로 저장되었음을 시각적으로 알려줍니다.

이 와이어프레임은 건물 단위로 받은 외부 고지서의 **총액**을 입력하고, 그 금액이 차후 **어떤 용도(개별/공용)로 사용될지 지정된 정보에 따라 분배될 기초 금액을 설정**하는 데 중점을 둡니다. 실제 세대별 배분은 "관리비 산정" 단계에서 이뤄집니다.

