# 🛡️ QIRO 보안 요구사항 및 정책

## 1. 문서 정보
- **문서명:** QIRO 보안 요구사항 및 정책
- **프로젝트명:** QIRO (중소형 건물관리 SaaS) 프로젝트
- **작성일:** 2025년 05월 28일
- **최종 수정일:** 2025년 05월 28일
- **작성자:** (이름 또는 보안 담당팀)
- **검토자/승인자 (선택 사항):** (이름 또는 보안 책임자)
- **문서 버전:** 1.0

## 2. 개요
### 2.1. 문서 목적
본 문서는 QIRO 서비스의 정보 자산을 보호하고, 개인정보보호법 등 관련 법규를 준수하며, 사용자에게 안전하고 신뢰할 수 있는 서비스를 제공하기 위한 포괄적인 보안 요구사항, 정책, 및 기본 절차를 정의하는 것을 목적으로 한다.

### 2.2. 적용 범위
본 정책 및 요구사항은 QIRO 서비스의 기획, 설계, 개발, 테스트, 배포, 운영, 유지보수 등 모든 생명주기 단계와 관련된 시스템 구성 요소(하드웨어, 소프트웨어, 네트워크), 데이터(개인정보 포함), 그리고 관련 인력(내부 직원, 외부 협력업체 포함)에 적용된다.

### 2.3. 보안 목표
QIRO 서비스의 보안 목표는 다음과 같다:
- **기밀성 (Confidentiality):** 인가된 사용자만이 정보에 접근할 수 있도록 보장한다. 특히 개인정보 및 민감 정보의 유출을 방지한다.
- **무결성 (Integrity):** 정보는 인가된 사용자에 의해서만 정확하고 완전하게 수정될 수 있도록 보장하며, 정보의 위변조를 방지한다.
- **가용성 (Availability):** 인가된 사용자가 필요할 때 정보 및 관련 자원에 중단 없이 접근하고 사용할 수 있도록 보장한다.
- **개인정보보호 (Privacy):** 개인정보보호법 등 관련 법규를 철저히 준수하고, 정보 주체의 권리를 보호한다.
- **법규 준수 (Compliance):** 정보보호 관련 법률, 규정, 표준을 준수한다.

### 2.4. 주요 위협 요소 (예시)
- 데이터 유출 (개인정보, 계약 정보, 회계 정보 등)
- 악의적인 내부자 또는 외부 공격자에 의한 정보 위변조
- 서비스 거부(DoS/DDoS) 공격을 통한 서비스 마비
- 악성코드 감염 및 확산
- 인증 우회 및 권한 상승 공격
- 웹 애플리케이션 취약점 공격 (OWASP Top 10 등)

### 2.5. 참고 문서
- `00_시스템_아키텍처_다이어그램.md`
- `API_설계_가이드라인.md`
- `성능_보안_사용성_요구사항.md`
- 개인정보보호법, 정보통신망 이용촉진 및 정보보호 등에 관한 법률 (정보통신망법)
- (선택) KISA 개인정보의 안전성 확보조치 기준 해설서
- (선택) OWASP Top 10, ISO 27001 등 보안 표준

## 3. 보안 정책 (Security Policies)

### 3.1. 데이터 보안 정책
- **P-DS-01: 데이터 분류 및 취급:** 모든 데이터는 중요도 및 민감도에 따라 분류(예: 공개, 내부, 민감, 개인정보)하고, 각 등급에 따른 접근 통제, 암호화, 파기 등 차등화된 보안 조치를 적용한다.
- **P-DS-02: 개인정보보호:**
    - 개인정보 수집 시 정보 주체에게 고지 및 동의 절차를 준수한다. (개인정보처리방침 명시)
    - 개인정보는 수집 목적 범위 내에서만 최소한으로 처리하고, 목적 달성 시 안전하게 파기한다.
    - 주민등록번호 등 고유식별정보는 법령에 근거한 경우에만 최소한으로 처리하고, 암호화하여 안전하게 관리한다.
    - 개인정보 영향평가(PIA)를 필요한 경우 수행한다.
- **P-DS-03: 데이터 암호화:**
    - 주요 개인정보(비밀번호, 주민등록번호, 계좌번호 등)는 저장 시 일방향 또는 양방향 암호화(안전한 알고리즘 사용)를 적용한다.
    - 모든 외부 통신 및 중요 내부 통신 구간은 TLS 1.2 이상을 사용하여 암호화한다.
    - 암호키는 안전하게 생성, 관리, 배포, 폐기한다.
- **P-DS-04: 데이터 백업 및 복구:** 주요 데이터는 정기적으로 백업하고(최소 일 1회), 백업 데이터는 원본과 분리된 안전한 장소에 암호화하여 보관한다. 정기적인 복구 테스트를 통해 복구 절차의 유효성을 검증한다 (RTO/RPO 정의).
- **P-DS-05: 데이터 파기:** 개인정보 및 중요 데이터는 복구 불가능한 방법으로 안전하게 파기하고, 파기 결과를 기록 관리한다.

### 3.2. 계정 및 접근 통제 정책
- **P-AC-01: 사용자 계정 관리:** 모든 사용자 계정은 고유하게 식별되어야 하며, 역할 기반으로 최소 권한 원칙을 적용한다. 계정 생성, 변경, 삭제 절차를 수립하고 이력을 관리한다. 휴면 계정은 정기적으로 검토하여 비활성화 또는 삭제한다.
- **P-AC-02: 비밀번호 관리:** 안전한 비밀번호 설정 규칙(최소 길이, 복잡도 조합)을 적용하고, 주기적 변경을 권고한다. 로그인 시도 제한 및 계정 잠금 기능을 구현한다.
- **P-AC-03: 다중 요소 인증(MFA):** 관리자 등 중요 계정 및 민감 정보 접근 시 MFA 사용을 의무화한다.
- **P-AC-04: 접근 권한 관리:** 사용자의 역할 변경 또는 퇴사 시 즉시 접근 권한을 변경하거나 회수한다. 접근 권한은 정기적으로 검토한다.

### 3.3. 네트워크 보안 정책
- **P-NW-01: 네트워크 분리:** 서비스 환경(개발, 테스트, 운영) 및 중요도에 따라 네트워크를 분리하고, VPC, 서브넷, 방화벽(Security Group, NACL)을 통해 접근을 통제한다.
- **P-NW-02: 침입 차단 및 탐지:** 인터넷 연결 구간에는 웹 방화벽(WAF) 및 침입 탐지/방지 시스템(IDS/IPS) 운영을 고려한다.
- **P-NW-03: 원격 접근 관리:** 시스템 원격 접속은 VPN 등 안전한 채널을 사용하고, 최소한의 인원에게만 허용하며, 접속 기록을 관리한다.

### 3.4. 시스템 및 애플리케이션 보안 정책
- **P-SA-01: 보안 코딩 준수:** OWASP Top 10 등에서 정의하는 주요 웹 애플리케이션 취약점을 예방하기 위한 보안 코딩 가이드라인을 준수한다. (SQL Injection, XSS, CSRF 방지 등)
- **P-SA-02: 취약점 관리:** 운영체제, 웹 서버, WAS, DBMS, 프레임워크, 라이브러리 등 모든 시스템 구성 요소에 대해 정기적인 보안 취약점 점검 및 패치 관리를 수행한다.
- **P-SA-03: 형상 관리:** 모든 소스코드, 설정 파일, 문서 등은 형상 관리 시스템을 통해 버전을 관리하고, 주요 변경 사항에 대한 승인 절차를 따른다.

### 3.5. 로그 관리 및 모니터링 정책
- **P-LG-01: 로깅 및 감사 추적:** 주요 시스템 이벤트, 사용자 접속 및 활동, 오류 발생, 보안 이벤트 등을 기록하고, 로그는 위변조 방지 조치 후 최소 1년 이상 안전하게 보관한다. (개인정보보호법 준수)
- **P-LG-02: 보안 모니터링:** 주요 보안 이벤트 및 시스템 이상 징후를 실시간으로 모니터링하고, 임계치 초과 또는 중요 이벤트 발생 시 즉시 알림 및 대응 절차를 따른다.

### 3.6. 협력업체 보안 정책
- **P-TP-01: 외부 인력 및 업체 보안:** 시설관리자(협력업체) 등 외부 인력이 시스템에 접근할 경우, 최소한의 권한만 부여하고, 계약 시 보안 서약 및 관련 규정 준수를 명시한다. 정기적인 보안 점검을 수행한다.

## 4. 보안 요구사항 (Security Requirements)
(본 섹션에서는 위 정책을 바탕으로 QIRO 시스템에 구현되어야 할 구체적인 보안 기능 및 조치를 기술합니다. `성능_보안_사용성_요구사항.md`의 보안 관련 내용을 상세화하고 추가합니다.)

### 4.1. 인증 (Authentication)
- **SR-AUTH-001:** 모든 사용자는 시스템 접근 전 아이디(이메일 또는 휴대폰 번호)와 안전한 비밀번호(최소 10자, 영문/숫자/특수문자 중 3종류 이상 조합)를 통해 인증해야 한다.
- **SR-AUTH-002:** 관리자(총괄관리자, 관리소장) 계정은 최초 로그인 시 비밀번호 변경을 강제하고, OTP(예: Google Authenticator) 기반의 2단계 인증(MFA) 사용을 필수로 한다.
- **SR-AUTH-003:** 로그인 시도 5회 연속 실패 시 해당 계정을 30분간 임시 잠금 처리하고, 관리자에게 알림을 발송한다.
- **SR-AUTH-004:** 사용자 세션은 30분간 활동이 없을 경우 자동 만료(로그아웃) 처리되어야 한다.
- **SR-AUTH-005:** 비밀번호 재설정 시 이메일 또는 SMS를 통한 본인 확인 절차를 거쳐야 한다.

### 4.2. 인가 (Authorization)
- **SR-AUTHZ-001:** 역할 기반 접근 제어(RBAC)를 구현하여, 정의된 역할(총괄관리자, 관리소장, 경리담당자, 시설관리자)별로 기능 및 데이터 접근 권한을 차등 부여한다. (상세 권한 매트릭스 별도 정의)
- **SR-AUTHZ-002:** 사용자는 자신이 관리 권한을 가진 사업장 또는 건물의 데이터에만 접근할 수 있어야 한다 (데이터 다중 임차(Multi-tenancy) 환경에서의 격리).
- **SR-AUTHZ-003:** 시설관리자(협력업체) 계정은 자신에게 할당된 작업(민원/시설보수) 관련 정보에만 제한적으로 접근할 수 있어야 한다.

### 4.3. 데이터 보호 (Data Protection)
- **SR-DP-001:** 주민등록번호(법령 근거 시), 은행 계좌번호, 신용카드 정보(수집 시) 등 민감한 개인정보는 저장 시 AES-256 또는 그 이상의 안전한 알고리즘으로 암호화되어야 한다. 비밀번호는 SHA-256 이상의 해시 함수와 Salt를 사용하여 일방향 암호화한다.
- **SR-DP-002:** 개인정보가 포함된 화면 조회 시, 전체 정보가 아닌 일부 마스킹 처리된 형태로 표시하는 것을 원칙으로 한다. (예: 홍*동, 010-****-1234)
- **SR-DP-003:** 개인정보 및 중요 데이터의 다운로드(엑셀 등) 시, 다운로드 사유를 입력하고 관리자 승인을 받거나, 다운로드 이력을 철저히 기록 관리해야 한다.
- **SR-DP-004:** 데이터베이스 백업 파일은 암호화하여 안전하게 보관하고, 접근 권한을 엄격히 통제해야 한다.

### 4.4. 입력값 검증 및 출력값 처리
- **SR-IVOE-001:** 모든 사용자 입력값(웹폼, API 파라미터 등)에 대해 서버 사이드에서 길이, 형식, 허용 문자, 범위 등을 철저히 검증하고, 유효하지 않은 입력은 거부해야 한다.
- **SR-IVOE-002:** SQL Injection을 방지하기 위해 모든 데이터베이스 쿼리는 Parameterized Query(Prepared Statement) 또는 ORM을 사용해야 한다. 동적 쿼리 생성을 지양한다.
- **SR-IVOE-003:** 웹 페이지에 사용자 입력값을 출력할 경우, XSS(Cross-Site Scripting) 공격을 방지하기 위해 반드시 적절한 이스케이프(Escape) 처리를 해야 한다.
- **SR-IVOE-004:** 파일 업로드 시 확장자, 크기, 파일 시그니처 등을 검증하고, 업로드된 파일은 웹 루트 디렉토리가 아닌 안전한 경로에 저장하며, 실행 권한을 제거해야 한다. (필요시 악성코드 검사)

### 4.5. 시스템 및 네트워크 보안 강화
- **SR-SYS-001:** 운영 서버에는 최소한의 필수 서비스만 운영하고, 불필요한 포트 및 서비스는 비활성화 또는 제거한다.
- **SR-NET-001:** 인터넷에 직접 노출되는 서버(웹서버, API 게이트웨이 등)는 최소화하고, 데이터베이스 등 주요 내부 시스템은 Private Subnet에 배치하여 외부 직접 접근을 차단한다.
- **SR-NET-002:** 관리자용 콘솔(AWS Management Console, 서버 SSH 등) 접근은 지정된 IP 또는 VPN을 통해서만 허용하고, MFA를 적용한다.

### 4.6. 감사 및 로깅
- **SR-LOG-001:** 다음의 주요 활동에 대한 감사 로그를 기록해야 한다: 사용자 로그인(성공/실패), IP 주소, 개인정보 조회/수정/삭제, 중요 설정 변경, 파일 다운로드, 관리자 작업 등.
- **SR-LOG-002:** 로그는 최소 1년간 안전하게 보관(위변조 방지)하며, 정기적으로 검토하여 이상 징후를 파악한다.

## 5. 보안 아키텍처 (개요)
- AWS Well-Architected Framework의 보안 원칙을 준수한다.
- **경계 방어:** AWS WAF, Security Groups, NACLs를 활용하여 네트워크 경계에서의 악의적 트래픽 차단.
- **인증 및 권한 관리:** AWS IAM(Identity and Access Management)을 통해 AWS 리소스 접근 권한 최소화. AWS Cognito 또는 자체 인증 시스템을 통한 사용자 인증 강화.
- **데이터 암호화:** AWS KMS(Key Management Service)를 활용한 데이터 암호화 키 관리. S3 서버 사이드 암호화(SSE), RDS 암호화 기능 활용.
- **모니터링 및 로깅:** AWS CloudTrail, CloudWatch Logs, AWS Config 등을 활용한 지속적인 모니터링 및 로깅.
- (상세 내용은 `00_시스템_아키텍처_다이어그램.md` 참조)

## 6. 보안 테스트 및 검증
- 개발 단계에서부터 시큐어 코딩 리뷰를 수행한다.
- 정기적인 웹 취약점 스캐닝(예: OWASP ZAP) 및 필요시 모의 해킹을 통해 보안 취약점을 식별하고 개선한다. (연 1회 이상 또는 주요 변경 시)
- 주요 보안 요구사항에 대한 테스트 케이스를 작성하고 검증한다.

## 7. 보안 사고 대응 절차 (개요)
1.  **탐지 및 분석:** 보안 사고 의심 징후 탐지 및 초기 분석.
2.  **초기 대응 및 확산 방지:** 사고 영향 범위 파악 및 확산 방지를 위한 긴급 조치.
3.  **보고:** 내부 보고 체계에 따라 관련 부서 및 책임자에게 보고. (필요시 관계기관 신고)
4.  **조사 및 원인 분석:** 상세 조사를 통해 사고 원인, 피해 범위, 영향 등을 파악.
5.  **복구 및 정상화:** 시스템 복구 및 서비스 정상화.
6.  **사후 조치 및 재발 방지:** 개선 대책 수립 및 이행, 관련 정책/절차 업데이트.
(상세 내용은 별도의 '보안 사고 대응 계획' 문서에서 정의)

## 8. 부록 (선택 사항)
- 관련 법규 목록 (예: 개인정보보호법 제29조 안전성 확보조치 등)
- 보안 관련 용어 정의

## 9. 문서 이력
| 버전 | 날짜       | 작성자 | 주요 변경 내용                       |
| :--- | :--------- | :----- | :----------------------------------- |
| 1.0  | 2025-05-28 | (이름) | QIRO 보안 요구사항 및 정책 초안 작성 |
|      |            |        |                                      |

---