# 🏗️ QIRO 시스템 아키텍처

## 1. 문서 정보
- **문서명:** QIRO 시스템 아키텍처
- **프로젝트명:** QIRO (중소형 건물관리 SaaS) 프로젝트
- **작성일:** 2025년 05월 28일
- **최종 수정일:** 2025년 05월 28일
- **작성자:** (이름 또는 팀)
- **검토자/승인자 (선택 사항):** (이름 또는 팀)
- **문서 버전:** 1.1 (S3 파일 저장 내용 명확화)

## 2. 개요
### 2.1. 문서 목적
본 문서는 QIRO 서비스의 전체 시스템 아키텍처를 기술하는 것을 목적으로 한다. 주요 구성 요소, 각 요소 간의 상호작용, 사용 기술 스택, 그리고 AWS 클라우드 환경에서의 배포 전략을 포함한다. 특히, **파일 저장소로서 AWS S3의 활용 방안**을 명확히 기술한다.

### 2.2. 범위
본 문서는 QIRO 서비스의 논리적 아키텍처, 물리적/배포 아키텍처, 주요 데이터 흐름 및 기술 스택을 다룬다. 각 컴포넌트의 내부 상세 설계는 본 문서의 범위를 벗어난다.

### 2.3. 주요 아키텍처 목표
- **확장성 (Scalability):** 사용자 및 데이터 증가에 유연하게 대응할 수 있는 구조.
- **고가용성 (High Availability):** 장애 발생 시 서비스 중단을 최소화하고 안정적인 서비스 제공.
- **보안성 (Security):** 사용자 데이터 및 시스템을 안전하게 보호.
- **유지보수성 (Maintainability):** 시스템 변경 및 확장이 용이한 모듈화된 구조.
- **비용 효율성 (Cost-Effectiveness):** AWS 자원을 효율적으로 사용하여 운영 비용 최적화.

### 2.4. 기술 스택 요약
- **클라우드 플랫폼:** Amazon Web Services (AWS)
- **프론트엔드:** Next.js (React, TypeScript)
- **백엔드 (API 서버):** Spring Boot, Kotlin (JVM)
- **데이터베이스:** PostgreSQL (AWS RDS for PostgreSQL)
- **파일 스토리지:** AWS S3
- **인프라 관리 (선택 사항):** AWS CDK, Terraform 등

## 3. 논리적 아키텍처 (Logical Architecture)
### 3.1. 전체 시스템 구성도 (High-Level Diagram)
(아래는 이미지 파일을 첨부하는 방식의 예시입니다. `images` 폴더에 다이어그램 파일을 저장하고 경로를 맞게 수정해주세요. **다이어그램에 AWS S3가 파일 저장소로 명확히 표현되어야 합니다.**)

![QIRO 전체 시스템 구성도](images/qiro_logical_architecture_v1.1.png)
*그림 1: QIRO 논리적 아키텍처 (S3 파일 저장 포함)*

*(아래는 Mermaid.js를 사용한 텍스트 기반 다이어그램 예시입니다. Markdown 뷰어가 Mermaid를 지원해야 합니다.)*
```mermaid
graph LR
    subgraph "사용자 환경"
        User[사용자 (웹 브라우저/모바일 웹)]
    end

    subgraph "AWS Cloud"
        CloudFront[AWS CloudFront (CDN)] --> S3_Frontend[S3 Bucket: Next.js 정적 호스팅];
        User --> CloudFront;

        subgraph "API 계층"
            APIGateway[AWS API Gateway]
        end
        CloudFront --> APIGateway;  // API 요청은 API Gateway로

        subgraph "애플리케이션 계층 (VPC Private Subnet)"
            ALB[Application Load Balancer]
            SpringBootApp[Spring Boot/Kotlin App (ECS Fargate / EKS)]
        end
        APIGateway --> ALB;
        ALB --> SpringBootApp;

        subgraph "데이터 계층 (VPC Private Subnet)"
            RDS_PG[AWS RDS for PostgreSQL]
            S3_FileStorage[AWS S3 Bucket: 파일 스토리지 (계약서, 사진 등)]
            ElastiCache[(선택) ElastiCache: Redis/Memcached]
        end
        SpringBootApp --> RDS_PG;
        SpringBootApp --> S3_FileStorage; // 파일 업로드/다운로드
        SpringBootApp --> ElastiCache;

        subgraph "기타 서비스"
            Cognito[(선택) AWS Cognito: 인증]
            SES[AWS SES: 이메일 발송]
            SQS_SNS[(선택) SQS/SNS: 비동기 메시징]
            CloudWatch[AWS CloudWatch: 모니터링/로깅]
        end
        SpringBootApp --> SES;
        SpringBootApp --> SQS_SNS;
        APIGateway --> Cognito; // 인증 연동
        SpringBootApp --> Cognito; // 인증 연동
        SpringBootApp --> CloudWatch; // 로그
    end