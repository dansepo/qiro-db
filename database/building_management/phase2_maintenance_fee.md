# Phase 2: 관리비 부과 시스템 구축

## 목표
건물 관리비의 산정, 부과, 고지, 수납까지의 전체 프로세스를 자동화합니다.

## 태스크 목록

### 1. 관리비 항목 및 정책 관리
- [✅] 1.1 관리비 항목 마스터 테이블 확장 (완료) ✨
  - 일반관리비, 청소비, 경비비, 소독비 등
  - 공용전기료, 수도료, 가스료, 난방비 등
  - 승강기유지비, 시설보수비, 보험료 등
  - 항목별 계산 방식 (정액, 면적비례, 사용량비례 등)

- [✅] 1.2 관리비 정책 테이블 생성 (완료) ✨
  - 건물별 관리비 정책 설정
  - 부과 주기 및 납부 기한 설정
  - 연체료 정책 및 할인 정책
  - 면제 및 감면 정책

- [✅] 1.3 요금 체계 테이블 생성 (완료) ✨
  - 단가 및 요율 관리
  - 구간별 차등 요금제
  - 시기별 요금 변동 관리

### 2. 사용량 및 검침 관리
- [✅] 2.1 검침 데이터 테이블 생성 (완료) ✨
  - 호실별 전기/수도/가스 사용량
  - 검침일 및 검침원 정보
  - 추정 검침 및 정정 처리
  - 공용 시설 사용량 관리

- [✅] 2.2 사용량 배분 테이블 생성 (완료) ✨
  - 공용 사용량의 호실별 배분
  - 배분 기준 및 비율 관리
  - 배분 결과 검증 및 조정

- [✅] 2.3 외부 고지서 관리 테이블 (완료) ✨
  - 전기/수도/가스 공급업체 고지서
  - 고지서 데이터 자동 입력
  - 고지서 검증 및 오류 처리

### 3. 관리비 산정 및 계산 엔진
- [✅] 3.1 월별 관리비 산정 테이블 (완료) ✨
  - 호실별 월별 관리비 내역
  - 항목별 계산 결과 저장
  - 계산 과정 추적 및 검증

- [✅] 3.2 관리비 계산 함수 개발 (완료) ✨
  - 정액 관리비 계산 함수
  - 면적 비례 계산 함수
  - 사용량 비례 계산 함수
  - 복합 계산 함수

- [✅] 3.3 관리비 검증 시스템 (완료) ✨
  - 계산 결과 자동 검증
  - 이상치 탐지 및 알림
  - 수동 조정 및 승인 프로세스

### 4. 고지서 발행 및 관리
- [✅] 4.1 고지서 템플릿 관리 (완료) ✨
  - 건물별 고지서 양식
  - 항목별 표시 설정
  - 다국어 지원 (한국어/영어)

- [✅] 4.2 고지서 발행 시스템 (완료) ✨
  - 월별 일괄 고지서 생성
  - 개별 고지서 재발행
  - 고지서 발송 이력 관리

- [✅] 4.3 고지서 배포 관리 (완료) ✨
  - 이메일 자동 발송
  - SMS 알림 발송
  - 카카오톡 알림톡 발송 🆕
  - 우편 발송 관리
  - 앱 푸시 알림

### 5. 수납 및 연체 관리
- [✅] 5.1 수납 관리 테이블 (완료) ✨
  - 입금 내역 관리
  - 수납 방법별 처리
  - 부분 납부 및 선납 처리

- [✅] 5.2 연체 관리 시스템 (완료)
  - 연체료 자동 계산
  - 연체 단계별 처리
  - 독촉 및 법적 조치 관리

- [✅] 5.3 정산 및 환불 관리 (완료)
  - 과납금 정산 처리
  - 환불 신청 및 처리
  - 계정 대체 처리

### 6. 관리비 분석 및 리포팅
- [ ] 6.1 관리비 통계 테이블
  - 월별/연도별 관리비 현황
  - 항목별 비용 분석
  - 수납률 및 연체율 분석

- [ ] 6.2 예산 대비 실적 관리
  - 연간 예산 계획 수립
  - 월별 예산 대비 실적
  - 차이 분석 및 조정

- [ ] 6.3 관리비 리포트 생성
  - 관리사무소용 관리 리포트
  - 입주자용 투명성 리포트
  - 임대인용 수익성 리포트

### 7. 자동화 및 배치 처리
- [ ] 7.1 관리비 산정 자동화
  - 월별 자동 산정 배치
  - 검침 데이터 자동 처리
  - 외부 고지서 자동 연동

- [ ] 7.2 고지서 발행 자동화
  - 정기 고지서 자동 발행
  - 발송 실패 재처리
  - 발송 결과 모니터링

- [ ] 7.3 수납 처리 자동화
  - 은행 입금 데이터 자동 연동
  - 가상계좌 입금 자동 처리
  - 카드 결제 자동 처리

## 검증 기준
- [ ] 관리비 계산이 정확한가?
- [ ] 고지서가 정상 발행되는가?
- [ ] 수납 처리가 정확한가?
- [ ] 연체 관리가 자동화되었는가?
- [ ] 성능 요구사항을 만족하는가? (대량 처리 < 10분)
- [ ] 데이터 무결성이 보장되는가?

## 예상 소요 시간: 2-3주